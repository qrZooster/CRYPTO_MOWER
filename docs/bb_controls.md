# üß≠ bb_controls.md ‚Äî –í–∏–∑—É–∞–ª—å–Ω–∞—è –≤–µ—Ç–≤—å Tradition Core 2025

**–§–∞–π–ª:** `bb_controls.py`  
**–í–µ—Ä—Å–∏—è:** Tradition Core 2025  
**–°–æ–∑–¥–∞–Ω:** 2025-10-17 12:31  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (`TCustomControl`, `TControl`, `TPage`, `TWSControl`, `TMonitor`)  
**–ê–≤—Ç–æ—Ä—Å—Ç–≤–æ:** Canonical Build System (Tradition-2025)

---

## üèó –û–±—â–∏–π –æ–±–∑–æ—Ä

`bb_controls.py` ‚Äî –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Å–ª–æ–π **Tradition Core Framework**, –æ—Ç–≤–µ—á–∞—é—â–∏–π –∑–∞ **HTML-–≥–µ–Ω–µ—Ä–∞—Ü–∏—é**,  
–∏–µ—Ä–∞—Ä—Ö–∏—é –∫–æ–Ω—Ç—Ä–æ–ª–æ–≤ –∏ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è.  
–≠—Ç–æ "–≥–ª–∞–∑" —Å–∏—Å—Ç–µ–º—ã ‚Äî –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∑–¥–µ—Å—å –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ –≤ **–∂–∏–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É**.

–ú–æ–¥—É–ª—å —Å–æ–∑–¥–∞—ë—Ç –µ–¥–∏–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (`TControl`), —Å—Ç—Ä–∞–Ω–∏—Ü (`TPage`) –∏  
WebSocket-–ø–æ—Ç–æ–∫–æ–≤ (`TWSControl`, `TMonitor`).

---

## ‚öôÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É—Ä–æ–≤–Ω–∏

| –ö–ª–∞—Å—Å | –†–æ–¥–∏—Ç–µ–ª—å | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|--------|-----------|------------|
| **TCustomControl** | `TComponent` | –ë–∞–∑–æ–≤—ã–π –≤–∏–∑—É–∞–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç: —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, HTML-–ª–æ–≥–∏–∫–∞ |
| **TControl** | `TCustomControl` | –û–±—ã—á–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (`div`, `span`, `button` –∏ —Ç.–¥.) |
| **TPage** | `TCustomControl` | –ö–æ—Ä–Ω–µ–≤–∞—è HTML-—Å—Ç—Ä–∞–Ω–∏—Ü–∞ |
| **TWSControl** | `TControl` | –ü—Ä–∏—ë–º–Ω–∏–∫ WebSocket-–ø–æ—Ç–æ–∫–∞ |
| **TMonitor** | `TWSControl` | –í–∏–∑—É–∞–ª—å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä –∫–∞–Ω–∞–ª–æ–≤ Tradition |

---

## üß© –ö–ª–∞—Å—Å `TCustomControl` ‚Äî –±–∞–∑–æ–≤—ã–π –≤–∏–∑—É–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

**–†–æ–ª—å:** —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –æ—Å–Ω–æ–≤—É –≤–∏–∑—É–∞–ª—å–Ω–æ–π –∏–µ—Ä–∞—Ä—Ö–∏–∏ Tradition.  
–ö–∞–∂–¥—ã–π –∫–æ–Ω—Ç—Ä–æ–ª –∏–º–µ–µ—Ç –≤–ª–∞–¥–µ–ª—å—Ü–∞ (`Owner`), —Ä–æ–¥–∏—Ç–µ–ª—è (`Parent`) –∏ –∫–æ–ª–ª–µ–∫—Ü–∏—é –¥–æ—á–µ—Ä–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (`Controls`).

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è
| –ü–æ–ª–µ | –¢–∏–ø | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-------|------|------------|
| `Owner` | `TComponent` | –í–ª–∞–¥–µ–ª–µ—Ü –∫–æ–Ω—Ç—Ä–æ–ª–∞ |
| `Parent` | `TCustomControl` | –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —ç–ª–µ–º–µ–Ω—Ç |
| `Controls` | `dict[str, TCustomControl]` | –î–æ—á–µ—Ä–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã |
| `src` | `list[str | TCustomControl]` | –ò—Å—Ç–æ—á–Ω–∏–∫ HTML-–∫–æ–Ω—Ç–µ–Ω—Ç–∞ |

### –ú–µ—Ç–æ–¥—ã HTML-–ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è
| –ú–µ—Ç–æ–¥ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|--------|-------------|
| `text(html)` | –î–æ–±–∞–≤–ª—è–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π HTML-—Ç–µ–∫—Å—Ç |
| `tg(tag, cls, attr)` / `etg(tag)` | –û—Ç–∫—Ä—ã–≤–∞–µ—Ç / –∑–∞–∫—Ä—ã–≤–∞–µ—Ç HTML-—Ç–µ–≥ |
| `br(count)` | –î–æ–±–∞–≤–ª—è–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫ |
| `h(count, s, cls, attr)` | –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ h1‚Äìh6 |
| `div()`, `table()`, `tr()`, `td()` | –£–ø—Ä–æ—â—ë–Ω–Ω—ã–µ —Ñ–∞—Å–∞–¥—ã —Ç–µ–≥–æ–≤ |
| `html()` | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–æ–±—Ä–∞–Ω–Ω—ã–π HTML-–¥–æ–∫—É–º–µ–Ω—Ç |

**–§–∏–ª–æ—Å–æ—Ñ–∏—è:**  
> ‚Äú–ö–∞–∂–¥—ã–π –∫–æ–Ω—Ç—Ä–æ–ª ‚Äî –º–∞–ª–µ–Ω—å–∫–∏–π –º–∞—Å—Ç–µ—Ä HTML, —É–º–µ—é—â–∏–π —Å–∞–º —Ä–∏—Å–æ–≤–∞—Ç—å —Å–µ–±—è –∏ —Å–≤–æ–∏—Ö –¥–µ—Ç–µ–π.‚Äù

---

## üîπ –ö–ª–∞—Å—Å `TControl` ‚Äî –±–∞–∑–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

**–†–æ–¥–∏—Ç–µ–ª—å:** `TCustomControl`  
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ª—é–±—ã—Ö HTML-—ç–ª–µ–º–µ–Ω—Ç–æ–≤ ‚Äî `div`, `span`, `button`, `input` –∏ —Ç.–¥.

–°–æ–∑–¥–∞—ë—Ç—Å—è –∫–∞–∫:

```python
btn = TControl(Owner, "BtnOK", Parent=page, tag="button", text="OK")
```

–ü–æ–∫–∞ –∫–ª–∞—Å—Å –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –Ω–∞—Å–ª–µ–¥—É–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ `TCustomControl`,  
–Ω–æ —è–≤–ª—è–µ—Ç—Å—è —Ç–æ—á–∫–æ–π —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –¥–ª—è –±—É–¥—É—â–∏—Ö –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (–∫–Ω–æ–ø–æ–∫, —Ñ–æ—Ä–º, –≤–∏–¥–∂–µ—Ç–æ–≤).

---

## üìÑ –ö–ª–∞—Å—Å `TPage` ‚Äî HTML-—Å—Ç—Ä–∞–Ω–∏—Ü–∞ Tradition Core

**–†–æ–¥–∏—Ç–µ–ª—å:** `TCustomControl`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ–ª–Ω—ã–π HTML-–¥–æ–∫—É–º–µ–Ω—Ç —Å `<head>`, `<body>` –∏ —Å—Ç–∏–ª—è–º–∏ Tradition.

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è
| –ü–æ–ª–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----------|
| `title` | –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã |
| `style` | –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ CSS-—Å—Ç–∏–ª–∏ |
| `Parent` | `None` (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ ‚Äî –∫–æ—Ä–µ–Ω—å –¥–µ—Ä–µ–≤–∞) |

### –ü–æ–≤–µ–¥–µ–Ω–∏–µ
- –ú–µ—Ç–æ–¥ `html()` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ–ª–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç, –≤–∫–ª—é—á–∞—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ, —Å—Ç–∏–ª–∏ –∏ —Ç–µ–ª–æ.  
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–∞—Å–∫–∞–¥–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–æ–≤ (—á–µ—Ä–µ–∑ `add_control`).

**–í—ã–≤–æ–¥:** —Å—Ç—Ä–∞–Ω–∏—Ü–∞ ‚Äî —ç—Ç–æ ‚Äú–∫–æ—Ä–µ–Ω—å –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –º–∏—Ä–∞‚Äù –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

---

## üì° –ö–ª–∞—Å—Å `TWSControl` ‚Äî WebSocket-–ø—Ä–∏—ë–º–Ω–∏–∫

**–†–æ–¥–∏—Ç–µ–ª—å:** `TControl`  
–û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø—Ä–∏—ë–º –¥–∞–Ω–Ω—ã—Ö –∏–∑ WebSocket-–∫–∞–Ω–∞–ª–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Ö –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ.

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
| –ü–æ–ª–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----------|
| `url` | –ê–¥—Ä–µ—Å WebSocket-—Å–µ—Ä–≤–µ—Ä–∞ |
| `channel` | –ò–º—è –∫–∞–Ω–∞–ª–∞ –ø–æ–¥–ø–∏—Å–∫–∏ |
| `eid` | DOM-id —ç–ª–µ–º–µ–Ω—Ç–∞ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |

### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã
- –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ WebSocket –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É.  
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ `{"type": "subscribe", "channel": ...}`.  
- –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –¥–æ–±–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç –≤ HTML-—ç–ª–µ–º–µ–Ω—Ç —Å id = `eid`.  
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–≤—Ç–æ—Å–∫—Ä–æ–ª–ª –≤–Ω–∏–∑ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ –∫–∞–Ω–∞–ª—É.

```js
ws.onmessage = (e) => {
  const msg = JSON.parse(e.data);
  if (msg.channel !== channel) return;
  const el = document.getElementById(eid);
  el.textContent += msg.text + "\n";
}
```

---

## üñ• –ö–ª–∞—Å—Å `TMonitor` ‚Äî –≤–∏–∑—É–∞–ª—å–Ω—ã–π –∫–∏–Ω–µ—Å–∫–æ–ø Tradition

**–†–æ–¥–∏—Ç–µ–ª—å:** `TWSControl`  
–°–æ–∑–¥–∞—ë—Ç **–∂–∏–≤–æ–π HTML-—ç–ª–µ–º–µ–Ω—Ç**, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –ª–æ–∫–∞–ª—å–Ω–æ–º—É WebSocket-–ø–æ—Ä—Ç—É (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 8081).  
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Å—Ç–∏–ª–µ ‚Äú–∫–æ–Ω—Å–æ–ª–∏ Tradition‚Äù (–∑–µ–ª—ë–Ω—ã–π —Ç–µ–∫—Å—Ç –Ω–∞ —Ç—ë–º–Ω–æ–º —Ñ–æ–Ω–µ).  
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –∑–∞ —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ –∏–ª–∏ —Ç–æ—Ä–≥–æ–≤—ã–º–∏ –∫–∞–Ω–∞–ª–∞–º–∏ (`SYS`, `TRADE`, `MARKET`).

### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:

```html
<div id="App-Monitor" style="font-family:monospace;color:#00ff88;
background:#1a1d29;padding:10px;border-radius:8px;
height:70vh;overflow-y:auto;">
Connecting to SYS...
</div>
```

---

## üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è Controls

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  TPage     ‚îÇ   ‚Üê –∫–æ—Ä–Ω–µ–≤–∞—è HTML-—Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ TControl   ‚îÇ   ‚Üê —ç–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (div, button, table)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ TWSControl ‚îÇ   ‚Üê –ø–æ–¥–ø–∏—Å—á–∏–∫ WebSocket-–ø–æ—Ç–æ–∫–∞
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ TMonitor   ‚îÇ   ‚Üê –≤–∏–∑—É–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫–æ–≤—ã–π —ç–∫—Ä–∞–Ω (console UI)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## ‚ú® –ö–ª—é—á–µ–≤—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

‚úÖ –ï–¥–∏–Ω–∞—è –≤–∏–∑—É–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å, –æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ Tradition  
‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è HTML-–¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –±–µ–∑ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö —à–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤  
‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å WebSocket-–ø–æ—Ç–æ–∫–∞–º–∏  
‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö UI-–∫–æ–Ω—Ç—Ä–æ–ª–æ–≤  
‚úÖ –ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å `TApplication` –∏ `TComponent`  

---

## üßæ –†–µ–∑—é–º–µ

`bb_controls.py` ‚Äî —ç—Ç–æ **–≥–ª–∞–∑–∞ –∏ —Ä—É–∫–∏ Tradition Framework**,  
–ø—Ä–µ–≤—Ä–∞—â–∞—é—â–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ –∏ —Å–æ–±—ã—Ç–∏—è –≤ –≤–∏–∑—É–∞–ª—å–Ω—ã–π HTML-–º–∏—Ä.

> üí¨ *‚Äú–ö–æ–Ω—Ç—Ä–æ–ª—ã Tradition –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ä–∏—Å—É—é—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å ‚Äî –æ–Ω–∏ –æ–∂–∏–≤–ª—è—é—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É.‚Äù*  
> ‚Äî –ó–∞–∫–æ–Ω Tradition, 2025
